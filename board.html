<!DOCTYPE html>
<html lang="en">
<meta content="width=device-width,maximum-scale=1.0,minimum-scale=1.0,initial-scale=1.0,user-scalable=no" name="viewport">
<style>
    * { margin: 0; padding: 0; }
    html, body { height: 100%; width: 100%; }
    canvas{
        height: 90%; width: 100%;
    }
</style>
<head>
    <meta charset="UTF-8">
    <title>iboard</title>
</head>
<body>
<canvas id="scene" onmousemove="onMove(event)" onmousedown="onDown(event)" onmouseup="onUp()">
</canvas>
</body>
<script src="js/GamePlay.js"></script>
<script>
    scene=document.getElementById("scene");
    context=scene.getContext('2d');
    init(context);
    let rect=scene.getBoundingClientRect();

    scene.addEventListener("touchmove",function (event) {
                let touch=event.touches[0];
                let x=touch.clientX-rect.left*(scene.width/rect.width);
                let y=touch.clientY-rect.top*(scene.height/rect.height);
                console.log("原X:"+touch.clientX+"减去后X:"+x);
                console.log("rect left:"+rect.left+";rect top"+rect.top);
                draw(context,x,y);
                console.log("touch"+x+","+y);


    });

    function onMove(event) {
        context.fillStyle="#dddddd";
        let x=event.clientX;
        let y=event.clientY;
//        let offsetLeft=event.offsetLeft;
//        let offsetTop=event.offsetTop;
//        context.lineTo(x-offsetLeft,y-offsetTop);
//        context.stroke();
        console.log("move"+x+","+y);
        draw(context,x,y);
    }

    function onDown(event) {

        context.fillStyle="#dddddd";
        let x=event.clientX;
        let y=event.clientY;
        console.log("down"+x+","+y);
//        let offsetLeft=event.offsetLeft;
//        let offsetTop=event.offsetTop;
//        context.moveTo(x-offsetLeft,y-offsetTop);
        draw(context,x,y);

    }
    function onUp() {
        context.onmousemove=null;
        context.onmousedown=null;

    }
</script>
</html>

